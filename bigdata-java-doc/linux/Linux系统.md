Linux系统

[参考](https://www.cnblogs.com/ysocean/tag/Linux%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/)

## 系统架构图

![linux架构图](.\pic\linux架构图.png)

## Linux文件及目录操作命令

### Linux命令的普遍语法格式

　　命令格式： 命令 【-选项】【参数】
　　例子：　　 ls -la /etc
　　说明：    ①、个别命令使用不遵循此格式，【】这种符号表示可以省略
　　　　　　  ②、当有多个选项时，可以写在一起
　　　　　　  ③、简化选项(一般用一个-)与完整选项（一般用两个--）
　　　　　　　　  比如 ls  -a 等于 ls  --all

### 目录处理命令

#### 显示目录文件命令：ls

　　①、命令名称：ls

　　②、英文原意：list

　　③、命令所在路径：/bin/ls

　　④、执行权限：所有用户

　　⑤、功能描述：显示目录文件

　　⑥、语法： ls 选项【-ald】【文件或目录】

　　　　　-a 显示所有文件，包括隐藏文件

　　　　　-l 详细信息显示

　　　　　-d 仅显示目录名，而不显示目录下的内容列表

　　　　　-h 人性化显示（hommization）

　　　　　-i 查看任意一个文件的i节点（类似于身份证唯一信息）

​     　　-t 用文件和目录的更改时间排序；可以用第一个显示的文件判断最近修改的文件

　　注意：. 开头的文件除非是目录，否则就是隐藏文件

##### linux系统目录文件及权限

目录格式：

```bash
drwxrwxr-x 2 bestseller bestseller      19 Jun 22  2017 bin
-rw-rw-r-- 1 bestseller bestseller  222984 Sep 16  2017 bing
-rw-r--r-- 1 root       root        237357 Jul 19  2018 coupon.log
-rw-rw-r-- 1 bestseller bestseller     478 Oct 22  2019 cpu-xiaoqi.sh
drwxrwxr-x 3 bestseller bestseller    4096 Sep  9  2020 deploy
-rw-rw-r-- 1 bestseller bestseller     664 Oct 22  2019 disk-xiaoqi.sh
-rw-rw-r-- 1 bestseller bestseller   44586 Jan  6  2018 FacePaymentSign_ERR_87.log
-rw-rw-r-- 1 bestseller bestseller   41718 Jan  6  2018 FacePaymentSign_ERR.log
-rw-rw-r-- 1 bestseller bestseller   14777 Jul 27  2018 grep_filter.log
-rw-r--r-- 1 bestseller bestseller 4278168 Feb 26  2019 laravel-2019-02-26.log
-rw-rw-r-- 1 bestseller bestseller  246464 Dec 25  2017 log
drwxr-xr-x 4 root       root           123 Jun 21  2017 pkgs
drwxrwxr-x 4 bestseller bestseller      31 Jun 20  2017 ps
```

1、-rw------- 第一位表示文件类型，- 表示是二进制文件，d 表示目录， l 表示软连接文件。后面的每三个为一组：

　　　　　　　　　　rw-  ---  ---

　　　　　　　　　　u   g   o
　　　　　　　　　　u（user）所有者 g（group）所属组 o（other） 其他人
　　　　　　　　　　r 读 w写 x执行 -无权限 

2、1　　引用计数，表示文件被引用过多少次

3、root　　这第一个root表示所有者，一般创建一个文件，所有者默认是创建者。

4、root　　这第二个root表示所属组。

5、1.3K　　表示文件字节大小，不带单位表示字节

6、ar 11 08:05 表示文件的最后修改时间。注意：Linux没有明确的创建时间，只有最后一次访问时间、文件的状态修改时间、文件的数据修改时间

7、anaconda-ks.cfg 表示文件名　　 

| 代表字符 | 权限     | 对文件的含义     | 对目标的含义               |
| -------- | -------- | ---------------- | -------------------------- |
| r        | 读权限   | 可以查看文件内容 | 可以列出目录中的内容       |
| w        | 写权限   | 可以修改文件内容 | 可以在目录中创建、删除文件 |
| x        | 执行权限 | 可以执行文件     | 可以进入目录               |

#### 创建目录命令：mkdir

　　①、命令名称：mkdir

　　②、英文原意：make directories

　　③、命令所在路径：/bin/mkdir

　　④、执行权限：所有用户

　　⑤、功能描述：创建新目录

　　⑥、语法： mkdir 【-p】【目录名】

　　　　　-p 递归创建

　　例子：创建单个目录：mkdir /tmp/vae.txt

　　　　　创建多个目录：mkdir /tmp/a.txt /tmp/b.txt

　　注意：1、创建的目录已经存在, 那么 Linux 会提示我们 Linux 无法创建它。

　　　　　2、不带任何参数运行 mkdir 命令会在当前目录下创建目录。

　　　　　3、不带上-p,如果新建的文件上级目录不存在则不会执行成功这种说法是错误的。加或者不加上 -p 前面的目录没有得都会依次创建。

　　　　　4、创建目录的首要条件是， 在想要创建目录的目标路径下你必须具有访问权限。

#### 切换目录命令：cd

　　①、命令名称：cd

　　②、英文原意：change directory

　　③、命令所在路径：**shell 内置命令**

　　④、执行权限：所有用户

　　⑤、功能描述：切换目录

　　⑥、语法： cd【目录名】

　　例子：切换到指定目录：cd /tmp/vae

　　　　　回到上一级目录：cd .. 

　　　　　还是在当前目录：cd .

　　　　　返回上两级目录：cd ../..

　　　　  返回进入此目录之前所在的目录：cd  - 

#### 显示当前目录命令：pwd

　　①、命令名称：pwd

　　②、英文原意：print working directory

　　③、命令所在路径：/bin/pwd

　　④、执行权限：所有用户

　　⑤、功能描述：显示当前目录

　　⑥、语法： pwd

　　例子：显示当前目录：pwd

#### 删除空目录命令：rmdir

　　①、命令名称：rmdir

　　②、英文原意：remove empty directories

　　③、命令所在路径：/bin/rmdir

　　④、执行权限：所有用户

　　⑤、功能描述：删除空目录（如果目录下存在文件则不能删除）

　　⑥、语法： rmdir 【空目录名】

　　例子：删除指定空目录：rmdir /tmp/a

#### 复制文件或目录命令：cp

　①、命令名称：cp

　　②、英文原意：copy

　　③、命令所在路径：/bin/cp

　　④、执行权限：所有用户

　　⑤、功能描述：复制文件或目录

　　⑥、语法： cp -rp 【原文件或目录】【目标目录】

　　　　　　　   -r  复制目录

　　　　　　　　 -p  保留文件属性

#### 剪切文件或目录命令：mv

　　①、命令名称：mv

　　②、英文原意：move

　　③、命令所在路径：/bin/mv

　　④、执行权限：所有用户

　　⑤、功能描述：剪切文件、改名

　　⑥、语法： mv【原文件或目录】【目标目录】

#### 删除文件目录或命令：rm

　　①、命令名称：rm

　　②、英文原意：remove

　　③、命令所在路径：/bin/rm

　　④、执行权限：所有用户

　　⑤、功能描述：剪切文件、改名

　　⑥、语法： rm -rf 【文件或目录】

　　　　　　　　 -r  删除目录

　　　　　　　　 -f  强制执行

　　例子：在 tmp 目录下有两个目录 tmp1 和 tmp1_1,rm -r tmp1_1 是删除这个目录，但是需要输入 y 来确认

　　　　　　rm -rf tmp1 是强制删除 tmp1 目录，不需要输入 y 来确认，这种做法很简单，但是容易误删文件，没有反悔的机会

　　　　　　rm -rf tmp1 tmp2 同时删除两个文件

### 文件处理命令

#### 创建空文件命令：touch

　　①、命令名称：touch

　　②、英文原意：

　　③、命令所在路径：/bin/touch

　　④、执行权限：所有用户

　　⑤、功能描述：创建空文件

　　⑥、语法： touch 【文件名】

　　例子：在 tmp 目录下创建 tmp.log 文件

#### 显示文件内容命令（适合内容较少的文件）：cat

　　①、命令名称：cat

　　②、英文原意：

　　③、命令所在路径：/bin/cat

　　④、执行权限：所有用户

　　⑤、功能描述：显示文件内容（只能显示内容较少的文件）

　　⑥、语法： cat【文件名】

　　　　　　　　-n 显示文件行号

　　例子：通过不加参数-n和加参数-n，显示/etc/issue的内容

#### 反向显示文件内容命令（适合内容较少的文件）：tac

　　①、命令名称：tac

　　②、英文原意：

　　③、命令所在路径：/bin/tac

　　④、执行权限：所有用户

　　⑤、功能描述：显示文件内容（只能显示内容较少的文件）

　　⑥、语法： tac【文件名】

#### 分页显示文件内容命令（不能向前翻页）：more

　　①、命令名称：more

　　②、英文原意：

　　③、命令所在路径：/bin/more

　　④、执行权限：所有用户

　　⑤、功能描述：分页显示文件内容

　　⑥、语法： more【文件名】

　　　　（空格）或f 翻页（一页一页的往后显示）

　　　　（Enter） 换行（一行一行的往后显示）

　　　　 q 或 Q 退出

#### 分页显示文件内容命令（可以前后翻页）：less

　①、命令名称：less

　　②、英文原意：

　　③、命令所在路径：/usr/bin/less

　　④、执行权限：所有用户

　　⑤、功能描述：分页显示文件内容

　　⑥、语法： less【文件名】

　　　　（空格）或f 或PgDn 翻页（一页一页的往后显示）

　　　　 PgUp向前翻页

　　　　（Enter） 换行或向下的箭头（一行一行的往后显示）

　　　　向上的箭头（一行一行的往前显示）

　　　　 q 或 Q 退出

　　　　输入/想搜索的字符，然后回车键

#### 显示文件内容命令（指定行数）：head

　　①、命令名称：head

　　②、英文原意：

　　③、命令所在路径：/usr/bin/head

　　④、执行权限：所有用户

　　⑤、功能描述：显示文件的前面几行　

　　⑥、语法： head【文件名】

　　　　-n  指定显示的行数

　　　　不加 -n 默认显示前 20 行数据

#### 反向文件内容命令（文件即时更新后也能动态显示，多用于日志文件显示）：tail

　　①、命令名称：tail

　　②、英文原意：

　　③、命令所在路径：/usr/bin/tail

　　④、执行权限：所有用户

　　⑤、功能描述：显示文件的后面几行　

　　⑥、语法： tail【文件名】

　　　　-n  指定显示的行数

　　　　-f 动态显示文件末尾内容（即文件实时变化，那么显示内容也会随之变化）

## Linux常用命令之链接命令和权限管理命令

### 链接命令

#### 生成链接文件命令：ln

　　①、命令名称：ln

　　②、英文原意：link

　　③、命令所在路径：/bin/link

　　④、执行权限：所有用户

　　⑤、功能描述：生成链接文件

　　⑥、语法： ln -s 【源文件】【目标文件】

　　　　　　　   -s 　　 创建软链接

　　　　　　　　不加 -s  创建硬链接

　　例子：一、创建文件 /etc/issue 的软链接 /tmp/issue.soft：ln -s /etc/issue /tmp/issue.soft

　　　　　二、创建文件 /etc/issue 的硬链接 /tmp/issue.hard：ln /etc/issue /tmp/issue.hard

![1120165-20171026223128711-181429913](.\pic\1120165-20171026223128711-181429913.png)

　　我们可以看到：

　　第一：软链接 前面是 l 开头的（link）,而硬链接是 - 开头，表示文件

　　第二：软链接所有者和所属组具有全部操作的权限，rwxrwxrwx;而硬链接不是。也就是软链接的前面都是 lrwxrwxrwx

　　第三：软链接类似与 windows 的快捷方式，有一个明显的箭头指向，而指向的是源文件

　　第四：硬链接文件除了文件名与源文件不一样，其余所有信息都是一样的。类似于 cp 复制操作。但是又和复制不一样，硬链接可以同步更新。

　　第五：通过 ls -i 操作，来查看 文件的 i 节点。发现硬链接和源文件的 i 节点是相同的，而软链接与源文件的 i 节点是不同的

　　第六：不允许将硬链接指向目录；不允许跨分区创建硬链接

![1120165-20171026223159351-180761180](.\pic\1120165-20171026223159351-180761180.png)

### 权限管理命令

#### 更改文件或目录权限命令：chmod

　　①、命令名称：chmod

　　②、英文原意：change the permissions mode of a file

　　③、命令所在路径：/bin/chmod

　　④、执行权限：所有用户

　　⑤、功能描述：改变文件或目录权限

　　⑥、语法： chmod 【{ugoa}{+-=}{rwx}】【文件或目录】

　　　　　　　　【mode=421】【文件或目录】

　　　　　　　　 -R 递归修改

　　**注意：不是每一个Linux用户都有权限更改某个文件或目录权限，能更改文件或目录权限的只有两种用户**

　　　　　**①、文件的所有者。我们通过ls命令查看某个文件的详细信息，可以看到该文件的所有者。**

　　　　　**②、root用户，这不用多说，root用户是linux系统权限最大的用户。别人不能干的事，root用户都能干。**

　　对于上面的语法 chmod 【{ugoa}{+-=}{rwx}】【文件或目录】，我们要知道ugoa分别是：u:表示所有者，g:表示所属组，o:表示其他人，a:表示所有人。而rwx表示的意思如下

![1120165-20171026224415805-802683867](.\pic\1120165-20171026224415805-802683867.png)

　　对于【mode=421】【文件或目录】，这是我们将权限用数字表示，其中 r 表示4，w表示2，x表示1，分别是2的0次方，1次方，2次方。那么我们可以这样理解：具有 rwx 权限的数字就是 7，具有 rw- 权限的数字是 6，具有 r-- 权限的数字是 4。

　　范例1：我们赋予 tmp 目录下的 tmp.log 所有者 x 的权限；赋予 所属组 w 权限，其他人 w 权限。

　　　　　　chmod u+x /tmp/tmp.log

　　　　　　chmod g+w,o+w /tmp/tmp.log

将上面例子改为用 数字来操作，也就是说我们要给 tmp.log赋予的文件权限是 rwxrw-rw-，用数字表示是766。chmod 766 tmp.log

　　我们还可以递归赋予权限，也就是加上 -R 参数给指定目录下的所有文件或目录赋予指定权限。

　　范例2：给 tmp 目录下所有文件和目录赋予 776 的权限

　　chmod -R 776 /tmp

#### 改变文件或目录所有者命令：chown

　①、命令名称：chown

　　②、英文原意：change file ownership

　　③、命令所在路径：/bin/chown

　　④、执行权限：所有用户

　　⑤、功能描述：改变文件或目录的所有者

　　⑥、语法： chmod 【用户】【文件或目录】

　　**注意：能更改文件或目录的所有者用户是 root**

　　这里我们通过useradd【用户名】命令创建用户，然后通过passwd【用户名】输入密码，这两个命令后面会将。我们通过这两个命令创建 vae 用户

然后我们将tmp.log的所有者更改为 vae 用户：chown vae tmp.log

#### 改变文件或目录所属组命令：chgrp

　　①、命令名称：chgrp

　　②、英文原意：change file group ownership

　　③、命令所在路径：/bin/chown

　　④、执行权限：所有用户

　　⑤、功能描述：改变文件或目录的所属组

　　⑥、语法： chgrp【用户组】【文件或目录】

　　**注意：能更改文件或目录的所有者用户是 root**

#### 显示、设置文件的缺省权限命令：umask

　　①、命令名称：umask

　　②、英文原意：the user file-creation mask

　　③、命令所在路径：shell 内置命令

　　④、执行权限：所有用户

　　⑤、功能描述：显示、设置文件的缺省权限

　　⑥、语法： umask 【-S】

　　　　　　　　-S 以rwx形式显示新建文件的缺省权限

　　**注意：可能大家不太明白这个命令的意思，我们分别执行umask和 umask -S ,如下：**

![1120165-20171027211601695-66697591](.\pic\1120165-20171027211601695-66697591.png)

　其中umask 执行显示结果是 0022,第一个0表示特殊权限，后面我们会单独进行讲解有哪几种特殊权限。022表示权限的掩码值，我们用7 7 7 减去 0 2 2得到755（是每一位相减），表示的就是下面通过加上-S输出的rwxr-xr-x，这个值用数字表示就是755.

　　这个意思说明创建一个文件的默认权限所有者为rwx,所属组为rx,其他人为rx。也就是说创建一个新文件默认权限为 rwxr-xr-x，我们创建一个文件来验证一下：

![1120165-20171027211146492-106433924](.\pic\1120165-20171027211146492-106433924.png)

　　我们发现使用touch命令创建了一个文件a.txt，然后发现权限并不是rwxr-xr-x，而是rw-r--r--。对比发现少了三个x，也就是少了可执行权限。这是为什么呢？

　　这是因为在Linux系统中，所有新创建的文件都是没有可执行权限的。这是出于Linux系统的一种自我保护，因为类似的病毒木马程序都是具有可执行权限的。所以在Linux系统中，新创建的文件是没有可执行权限的。

　　那么我们如何设置默认权限呢？比如我们想将新创建的文件权限设置为rwxr-xr--，也就是754。我们用777减去754得到023。也就是通过执行 umask 023 来完成默认权限设置。

![1120165-20171027212946508-1784038639](.\pic\1120165-20171027212946508-1784038639.png)

## Linux常用命令之文件 搜索命令

### 最强大的搜索命令：find

　　首先进行一点说明，find命令是我们在Linux系统中用来进行文件搜索用的最多的命令，功能特别强大。但是我们要说的是尽量少用find命令去执行搜索任务，就算要搜索我们也应该尽量的缩小范围，也不要在服务器使用高峰期进行文件搜索，因为搜索也是很占系统资源的。这就需要我们在进行Linux文件整理的时候，尽量规范化，什么文件放在什么目录下都要有比较好的约定。

　　find这个命令如果要完全讲清楚，恐怕得花费很长的时间，而且很多用法我们几乎用不到，所以这里我就不一一介绍此命令的每一种用法了，我会详细介绍几种最常用的用法，大家只需要记住这几种就完全够我们日常使用了。

　　①、命令名称：find

　　②、英文原意：

　　③、命令所在路径：/bin/find

　　④、执行权限：所有用户

　　⑤、功能描述：进行各种花式文件搜索

　　⑥、语法：find【搜索范围】【匹配条件】

　　**注意：Linux搜索和windows是有明显区别的，Linux严格区分文件大小写。**



#### 一、根据 文件或目录名称 搜索

　　find 【搜索目录】【-name或者-iname】【搜索字符】：-name和-iname的区别一个区分大小写，一个不区分大小写

　　①、find /etc -name init  (精准搜索，名字必须为 init 才能搜索的到)

　　②、find /etc -iname init  (精准搜索，名字必须为 init或者有字母大写也能搜索的到)

　　③、find /etc -name *init  (模糊搜索，以 init 结尾的文件或目录名) 

　　④、find /etc -name init??? (模糊搜索，？ 表示单个字符，即搜索到 init___)

#### 二、根据 文件大小 搜索

　　比如：在根目录下查找大于 100M 的文件

　　find / -size +204800

　　这里 +n 表示大于，-n 表示小于，n 表示等于

　　1 数据块 == 512 字节 ==0.5KB，也就是1KB等于2数据块

　　100MB == 102400KB==204800数据块

#### 三、根据 所有者和所属组 搜索

　　①、在home目录下查询所属组为 root 的文件

　　　　find /home -group root

　　②、在home目录下查询所有者为 root 的文件

　　　　find /home -user root

#### 四、根据 时间属性 搜索

　　find 【路径】【选项】【时间】

 　选项有下面三种：-amin 访问时间

　　　　　　　　　　 -cmin  文件属性被更改

　　　　　　　　　　 -mmin 文件内容被修改

　　时间：+n,-n,n分别表示超过n分钟，n分钟以内和n分钟

　　范例：在 /etc 目录下查找5 分钟内被修改过属性的文件和目录

　　　　　find /etc -cmin -5

#### 五、根据 文件类型或i节点 搜索

　　-type 根据文件类型查找：f表示文件，d表示目录，l表示软链接

　　范例：查找 /home 目录下文件类型是目录的  find /home -type l

　　-inum 根据i节点查找

　　范例：查找 /tmp 目录下i节点为400342的文件或目录 find /tmp -inum 400342

#### 六、组合条件 搜索　　

　　这里有两个参数：

　　①、-a 表示两个条件同时满足（and）

　　②、-o 表示两个条件满足任意一个即可（or）

　　范例：查找/etc目录下大于80MB同时小于100MB的文件

　　find /etc -size +163840 -a -size -204800

### 在文件资料库中查找文件命令：locate　　

　　①、命令名称：locate

　　②、英文原意：

　　③、命令所在路径：/usr/bin/locate

　　④、执行权限：所有用户

　　⑤、功能描述：在文件资料库中查找文件

　　⑥、语法：locate【文件名】

　　　　　　　　-i 不区分大小写

　　**注意：这里和 find 命令是有区别的，find是全盘检索，而locate 是在文件资料库中进行搜索。所以locate命令的执行要比find命令执行速度快很多。但是这里有个问题，文件资料库是需要不断更新的。我们新创建的文件如果不更新 文件资料库，使用 locate 是查找不到的。**

　　**updatedb 手动更新资料库，但是对于/tmp目录下的新建文件，是更新不到文件资料库的，因为/tmp目录不属于文件资料库的收录范围。**

![1120165-20171027230506430-1169911913](.\pic\1120165-20171027230506430-1169911913.png)

### 搜索命令所在的目录及别名信息：which

　　①、命令名称：which

　　②、英文原意：

　　③、命令所在路径：/usr/bin/which

　　④、执行权限：所有用户

　　⑤、功能描述：搜索命令所在的目录及别名信息

　　⑥、语法：which【命令】

　　　　范例：查询 ls 命令所在目录以及别名信息

![1120165-20171027231037742-867896483](.\pic\1120165-20171027231037742-867896483.png)

### 搜索命令所在的目录及帮助文档路径：whereis

　　①、命令名称：whereis

　　②、英文原意：

　　③、命令所在路径：/usr/bin/whereis

　　④、执行权限：所有用户

　　⑤、功能描述：搜索命令所在的目录及帮助文档路径

　　⑥、语法：whereis【命令】

　　　　范例：查询 ls 命令所在目录以及帮助文档路径

![1120165-20171027231311586-1476704815](.\pic\1120165-20171027231311586-1476704815.png)

### 在文件中搜寻字符串匹配的行并输出：grep

　　①、命令名称：grep

　　②、英文原意：

　　③、命令所在路径：/bin/grep

　　④、执行权限：所有用户

　　⑤、功能描述：在文件中搜寻字符串匹配的行并输出

　　⑥、语法：grep -iv 【指定字符串】【文件】

　　　　　　　　-i 不区分大小写

　　　　　　　　-v 排除指定字符串

　　　　范例：查找 /root/install.log 文件中包含 mysql 字符串的行，并输出

　　　　grep mysql /root/install.log

![1120165-20171027231510805-997698742](.\pic\1120165-20171027231510805-997698742.png)

## Linux常用命令之帮助和用户管理命令

### 帮助命令

#### 一、获得命令或配置文件帮助信息：man

　　①、命令名称：man

　　②、英文原意：manual

　　③、命令所在路径：/usr/bin/man

　　④、执行权限：所有用户

　　⑤、功能描述：获得帮助信息

　　⑥、语法： man【命令或配置文件】

　　范例1：查看 ls 命令的帮助信息：man ls

#### 二、获得shell内置命令的帮助信息：help

　　①、命令名称：help

　　②、英文原意：

　　③、命令所在路径：shell 内置命令

　　④、执行权限：所有用户

　　⑤、功能描述：获得shell内置命令帮助信息

　　⑥、语法： help【shell内置命令】

　　范例：查看 umask 命令的帮助信息：help umask

　　我们如何判断一个命令是否是shell内置命令呢？前面我们讲过which命令，是用来搜索命令所在的目录及别名信息，如果使用which找不到该命令的所在路径，那么此命令就是shell内置命令。

#### 三、获得命令的中文帮助信息：--help

　　这里给大家一个简单的技巧，如果我们想简单的查看命令的帮助信息，而不是上面显示的很多内容，那该怎么办呢？

　　我们执行此命令：命令 --help

　　范例：查看 ls 的帮助信息

### 用户管理命令

#### 一、添加新用户：useradd

　　①、命令名称：useradd

　　②、英文原意：

　　③、命令所在路径：/usr/sbin/useradd

　　④、执行权限：**root**

　　⑤、功能描述：添加新用户

　　⑥、语法： useradd【用户名】

　　范例：添加用户tom:useradd tom

#### 二、设置用户密码：passwd

　　①、命令名称：passwd

　　②、英文原意：

　　③、命令所在路径：/usr/bin/passwd

　　④、执行权限：**root**

　　⑤、功能描述：修改用户的密码

　　⑥、语法： passwd【用户名】

　　注意：root用户能修改任何用户的密码。而普通用户只能修改自己的密码，而且密码要符合密码规则，不然修改不了

　　范例：修改用户tom的密码

#### 三、查看登录用户简单信息：who

　　①、命令名称：who

　　②、英文原意：

　　③、命令所在路径：/usr/bin/who

　　④、执行权限：**root**

　　⑤、功能描述：查看登录用户简单信息

　　⑥、语法：who

　　范例：查看当前登录用户的信息

#### 四、查看登录用户详细信息：w

　　①、命令名称：w

　　②、英文原意：

　　③、命令所在路径：/usr/bin/w

　　④、执行权限：**root**

　　⑤、功能描述：查看登录用户详细信息

　　⑥、语法：w

　　范例：查看当前登录用户的详细信息

![1120165-20171028134801195-800419771](.\pic\1120165-20171028134801195-800419771.png)

　　第一排 13:46:28:当前系统的时间 up 4 days：Linux连续运行时间4天   1 user：表示当前1个用户登录   load average:0.00,0.01,0.05:系统的负载情况，分别表示过去一分钟，五分钟和十五分钟系统的负载情况。

　　USER：登录用户名

　　TTY：登录终端，pts表示远程终端，tty表示本地终端

　　FROM:登录的主机IP，如果没有写表示本机登录

## Liunx常用命令之压缩与解压命令

### 1、压缩解压缩格式 .gz

#### 一、将文件压缩为 .gz 格式,只能压缩文件：gzip

　　①、命令名称：gzip

　　②、英文原意：GNU zip

　　③、命令所在路径：/bin/gzip

　　④、执行权限：所有用户

　　⑤、功能描述：压缩文件，压缩后格式为.gz

　　⑥、语法： gzip【需要压缩的文件】

　　⑦、压缩后文件格式：.gz

　　**注意：只能压缩文件，不能压缩目录；压缩完后不保留原文件**

　　范例：我们在tmp目录下创建一个文件tmpgz，然后通过gzip tmpgz 压缩该文件，压缩后的文件为tmpgz.gz

![1120165-20171028203902055-1453991060](.\pic\1120165-20171028203902055-1453991060.png)

#### 二、将 .gz 文件解压：gunzip

　　①、命令名称：gunzip

　　②、英文原意：GNU unzip

　　③、命令所在路径：/bin/gunzip

　　④、执行权限：所有用户

　　⑤、功能描述：将格式为.gz的压缩文件解压

　　⑥、语法： gunzip【压缩文件名】

　　**注意：解压后不保留原文件**

　　**范例：我们将上面压缩后的文件tmpgz.gz解压：gunzip tmpgz.gz**

![1120165-20171028210950805-1431947057](.\pic\1120165-20171028210950805-1431947057.png)

### 2、压缩解压缩格式 .tar.gz 

#### 一、将文件或目录压缩为 .tar.gz 格式：tar -zcf

　　①、命令名称：tar

　　②、英文原意：

　　③、命令所在路径：/bin/tar

　　④、执行权限：所有用户

　　⑤、功能描述：将文件压缩为.tar.gz格式

　　⑥、语法： tar 选项【-zcf】【压缩后文件名】【目录】　　　

　　　　 　　　**-c 打包**
　　　　　　 　　-v 显示详细信息
　　　　 　　　　-f  指定文件名
　　　　 　　　　-z 打包同时压缩

　　⑦、压缩后文件格式：.tar.gz

　　范例：在/tmp目录下创建a目录，然后在a目录下创建文件a.txt，通过tar -zcvf a.tar.gz a 命令将a目录压缩为a.tar.gz文件

![1120165-20171028213538742-1047892599](.\pic\1120165-20171028213538742-1047892599.png)

**与前面的gzip命令不同，通过tar压缩后是保留原文件或原目录的。**

#### 二、将 .tar.gz 文件解压：tar -zxf

　　①、命令名称：tar

　　②、英文原意：

　　③、命令所在路径：/bin/tar

　　④、执行权限：所有用户

　　⑤、功能描述：将格式为.tar.gz的压缩文件解压

　　⑥、语法：tar 选项【-zxf】【.tar.gz的压缩文件名】【指定解压后的文件存放目录，默认当前目录】

　　　　　　　　　　-x 解包

　　　　　　　　　　-v 显示详细信息

　　　　　　　　　　-f 指定解压文件

　　　　　　　　　　-z 解压缩

　　**范例：将a.tar.gz文件解压：tar -zxf a.tar.gz**

![1120165-20171028214048680-940563160](.\pic\1120165-20171028214048680-940563160.png)

### 3、压缩解压缩格式 .zip

#### 一、将文件或目录压缩为 .zip 格式：zip

　　①、命令名称：zip

　　②、英文原意：

　　③、命令所在路径：/usr/bin/zip

　　④、执行权限：所有用户

　　⑤、功能描述：将文件或目录压缩为.zip格式

　　⑥、语法： zip 选项【-r】【压缩后文件名】【文件或目录】

　　　　　　　　-r 压缩目录

　　⑦、压缩后文件格式：.zip

　　范例：在/tmp目录下创建a目录，然后执行命令：zip -r a.zip a，将a目录压缩为a.zip文件

![1120165-20171028215508367-594404727](.\pic\1120165-20171028215508367-594404727.png)

**通过zip压缩后是保留原文件或原目录的。**

#### 　二、将 .zip 文件解压：unzip 

　　①、命令名称：unzip

　　②、英文原意：

　　③、命令所在路径：/usr/bin/unzip

　　④、执行权限：所有用户

　　⑤、功能描述：将格式为.zip的压缩文件解压

　　⑥、语法：uzip【.zip的压缩文件名】

　　**范例：将a.zip文件解压：unzip a.zip**

![1120165-20171028215733226-1345717204](.\pic\1120165-20171028215733226-1345717204.png)

解压之后也是保留原文件的

### 4、压缩解压缩格式 .bz2

#### 　一、将文件压缩为 .bz2 格式，只能压缩文件：bzip2

　　①、命令名称：bzip2

　　②、英文原意：

　　③、命令所在路径：/usr/bin/bzip2

　　④、执行权限：所有用户

　　⑤、功能描述：将文件压缩为.bz2 格式

　　⑥、语法： bzip2 选项【-k】 【文件】

　　　　　　　　-k　　产生压缩文件后保留原文件

　　⑦、压缩后文件格式：.bz2

　　范例：在/tmp目录下创建a文件，然后执行命令：bzip2 -k a，将a文件压缩为a.bz2文件。

![1120165-20171028220654633-1558937879](.\pic\1120165-20171028220654633-1558937879.png)

#### 二、将 .bz2 文件解压：bunzip2

　　①、命令名称：bunzip2

　　②、英文原意：

　　③、命令所在路径：/usr/bin/bunzip2

　　④、执行权限：所有用户

　　⑤、功能描述：将格式为.bz2的压缩文件解压

　　⑥、语法：bunzip2 选项【-k】 【压缩文件】

　　　　　　-k　　解压缩文件后保留原文件

　　**范例：将a.bz2 文件解压：bunzip2 a.bz2**

![1120165-20171028220946898-1080409097](.\pic\1120165-20171028220946898-1080409097.png)

不加参数k，解压之后不保留原文件



## Linux文本编辑器

### vim的工作模式

![vim](.\pic\vim.png)

##### 插入命令

![插入](.\pic\插入.gif)

##### 定位命令

![定位2](.\pic\定位2.gif)

##### 删除命令

![删除](.\pic\删除.png)

##### 复制和剪切命令

![复制](.\pic\复制.png)

##### 替换和取消命令

![替换和取消命令](.\pic\替换和取消命令.png)

##### 搜索和搜索替换命令

![搜索和搜索替换命令](.\pic\搜索和搜索替换命令.png)

##### 保存和退出命令

![保存和退出命令](.\pic\保存和退出命令.png)

## Liunx软件包管理之RPM命令

### 1、Linux软件包分类

#### 一、源码包

　　　　源码包能直接看到源码，安装时需要人为手工设置安装位置，一般是/usr/local/软件名/。源码包的升级版——脚本安装包，人为的改动源码使其有安装界面。

　　　　优点：

　　　　①、开源，如果有足够的能力，可以直接修改源代码。

　　　　②、安装时可以自由选择所需的功能。

　　　　③、软件是编译安装，所以更加适合自己的系统，更加稳定也效率更高。

　　　　④、卸载方便，直接删了你安装软件的那个目录就好了。

　　　　缺点：

　　　　①、安装步骤较多，尤其安装较大的软件集合时，容易出现拼写错误。

　　　　②、编译时间过长，比后面讲的二进制安装时间长。

　　　　③、因为是编译安装，安装过程中一旦报错新手很难解决。

#### 二、二进制包

　　　　这里的二进制包最要包括centos中的rpm包。rpm包有默认安装位置。/etc/ 配置文件安装目录；/usr/bin/ 可执行的命令安装目录；/usr/lib/ 程序所使用的函数库保存位置；/usr/share/doc/ 基本的软件使用手册保存位置；/usr/share/man/ 帮助文件保存位置。

　　　　优点：

　　　　①、包管理系统简单，只通过几个命令就可以实现包的安装、升级、查询和卸载。

　　　　②、安装速度比源码包快很多。

　　　　缺点：CentOS-6.8-x86_64-bin-DVD1.iso

　　　　①、已经经过编译了，看不到源代码。

　　　　②、功能选择不如源代码包灵活。

　　　　③、安装过程中有很多依赖的包，依赖性不好解决。

### 2、rpm 包命名规则

我们打开前面安装Linux系统的安装文件 CentOS-6.8-x86_64-bin-DVD1.iso。在package目录下都是rpm安装文件。

![1120165-20171101211938357-1122466240](.\pic\1120165-20171101211938357-1122466240.png)



　　我们以 httpd-2.2.15-53.el6.centos.x86_64.rpm 文件为例来看rpm包的命名规则。

　　①、httpd:软件包名

　　②、2.2.15：软件版本

　　③、15：软件发布的次数

　　④、el6.centos：适合的Linux平台

　　⑤、x86_64：适合的硬件平台，这里表示64位。

　　⑥、rpm：rpm包的扩展名，注意Linux是没有扩展名的概念，这里是告诉管理员这是一个rpm包文件。

### 3、rpm包安装

![1120165-20171101214951201-1060614410](.\pic\1120165-20171101214951201-1060614410.png)

范例：以安装 httpd-2.2.15-53.el6.centos.x86_64.rpm 为例：

　　　　我们进入到该rpm文件的挂载目录 /mnt/cdrom/Packages，执行命令：rpm -ivh httpd-2.2.15-53.el6.centos.x86_64.rpm

　　注意：这种安装方法可能需要先安装各种依赖，安装过程特别繁琐，后面讲解yum安装会简单的多。

### 4、rpm包升级

![1120165-20171101215242826-1964547615](.\pic\1120165-20171101215242826-1964547615.png)

### 5、rpm包卸载

![1120165-20171101215313545-1834660725](.\pic\1120165-20171101215313545-1834660725.png)

### 6、查询rpm包是否安装

![1120165-20171101215513357-1371896459](.\pic\1120165-20171101215513357-1371896459.png)

### 7、查询软件包的详细信息

![1120165-20171101215539107-184003138](.\pic\1120165-20171101215539107-184003138.png)

![1120165-20171101215858076-1309181871](.\pic\1120165-20171101215858076-1309181871.png)



### 8、查询软件包的安装位置　　

![1120165-20171101215615513-1264025821](.\pic\1120165-20171101215615513-1264025821.png)

![1120165-20171101215956404-205009069](.\pic\1120165-20171101215956404-205009069.png)

## Linux软件包管理之yum在线管理

### 1、网络yum源

在安装好的Linux系统中，进入到 /etc/yum.repos.d/ 目录：

![1120165-20171102214446545-181602468](.\pic\1120165-20171102214446545-181602468.png)

一般来讲，以 .repo 结尾的文件都是yum源。如果能联网，会使用CentOS-Base.repo作为默认的yum源，如果不能联网我们使用 CentOS-Media.repo 作为本地光盘yum源。

　　通过vim 命令打开 CentOS-Base.repo：

![1120165-20171102214803607-2114674134](.\pic\1120165-20171102214803607-2114674134.png)

![1120165-20171102214836310-720254337](.\pic\1120165-20171102214836310-720254337.png)

mirrorlist和baseurl的地址就是用来下载rpm包的地址，我们使用其中一个就好了。由于默认的地址都是国外的网站，如果嫌网速慢的话，可以更改为国内的yum源地址。

　　比如阿里的：http://mirrors.aliyun.com/repo/Centos-7.repo

### 2、光盘yum源搭建步骤

#### ①、挂载光盘

![1120165-20171105210437466-875117633](.\pic\1120165-20171105210437466-875117633.png)

#### ②、让网络 yum 源失效

　　原理就是让以 .repo 文件都不存在。这里我们将 /etc/yum.repos.d 目录下的 .repo 文件都重命名为.repo.bak

![1120165-20171105210916607-1326695148](.\pic\1120165-20171105210916607-1326695148.png)

#### ③、修改光盘yum源文件

　　也就是修改上面的 CentOS-Media.repo 文件。

![1120165-20171105212827873-1051703291](.\pic\1120165-20171105212827873-1051703291.png)

#### ④、输入yum list 可以查看光盘yum源里面的软件包

![1120165-20171105213015779-1268701736](.\pic\1120165-20171105213015779-1268701736.png)

### 3、常用的yum命令

#### ①、查询所有可用软件包列表:yum list

注意：此命令是在配好的yum源服务器上去查询所有可用的软件包

#### ②、查询服务器上和关键字相关的软件包：yum search 关键字

如：yum search httpd

#### ③、yum 安装软件包：yum -y install 包名

　　选项： -y  表示自动回答 yes（如果不加，每安装一个软件都会让你确认是否安装）

　　　　　install  表示安装

　　范例：这里以安装编译器 gcc 为例（后面演示安装源码包必须要用到此编译器）：yum -y install gcc

　　没有报错，出现如下安装信息则说明安装成功：

![1120165-20171102220611545-1442410447](.\pic\1120165-20171102220611545-1442410447.png)

或者在安装完成之后，输入 rpm -q gcc 弹出如下界面表示安装成功：

![1120165-20171102220628857-328035645](.\pic\1120165-20171102220628857-328035645.png)

#### ④、yum 升级软件包：yum -y update 包名

　　注意：如果不指定包名，那么将会升级系统中所有的软件包，包括Linux内核。而Linux内核升级之后是需要在本地进行一些配置才能开机，如果是远程连接服务器进行Linux内核升级，那么是不可能启动服务器的。



#### ⑤、yum 卸载软件包：yum -y remove 包名

　　注意：卸载和升级也一样，而且由于软件包很多都有依赖性，你卸载A，而B和C都依赖于A，那么B和C都会卸载。假如C和Linux某个系统软件有依赖，而C也卸载掉了，可能造成某个系统功能不能使用。所以我们在卸载软件的时候一定要注意。



### 4、yum软件组管理

![1120165-20171102221232670-244532591](.\pic\1120165-20171102221232670-244532591.png)

安装某个软件组，会比我们一个一个安装某个软件包要方便的多。

![1120165-20171102221330873-1124688856](.\pic\1120165-20171102221330873-1124688856.png)

这是在远程的桌面显示的是中文信息，如果直接进入服务器查询，显示的便是英文，我们需要什么直接安装即可。

## Linux软件包管理之源码包、脚本安装

[Linux软件包管理之源码包、脚本安装](https://www.cnblogs.com/ysocean/p/7788902.html)

## Linux用户和用户组管理之相关配置文件

[Linux用户和用户组管理之相关配置文件](https://www.cnblogs.com/ysocean/p/7794885.html)

## Linux用户和用户组管理之用户管理命令

[Linux用户和用户组管理之用户管理命令](https://www.cnblogs.com/ysocean/p/7795480.html)



















































